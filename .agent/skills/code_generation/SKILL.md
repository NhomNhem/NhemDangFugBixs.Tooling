---
name: Code Generation
description: Guidelines for writing high-performance, maintainable Source Generators.
---

# Code Generation Skill

## Tooling
- **ALWAYS** use `IndentedTextWriter` for generating C# code.
- **NEVER** use manual `StringBuilder` or string interpolation with raw tabs for code blocks.

## Patterns
- Use the `writer.Block(header)` extension to manage curly braces and indentation automatically.
- Ensure all generated code includes the `// <auto-generated />` header.
- Use `partial` classes to allow seamless integration with user-written code.

## Optimization
- Prioritize zero-allocation patterns in generated runtime code.
- Use `dirty-bit` caching (e.g., in Stat calculation) to avoid redundant computations.
- Prefer `float` or primitive types where possible to avoid boxing.
